<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- DO NOT EDIT: file automatically generated by ucampas. -->
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /><meta content="text/css" http-equiv="Content-Style-Type" /><title>Computer Laboratory &#8211; OCaml Labs: The OCaml Compiler</title><link href="http://www.cl.cam.ac.uk/style/layout.css" media="all" rel="stylesheet" type="text/css" /><link href="http://www.cl.cam.ac.uk/style/print.css" media="print" rel="stylesheet" type="text/css" /><link href="http://www.cl.cam.ac.uk/style/blue.css" media="all" rel="stylesheet" type="text/css" /><!--[if IE 6]><link rel="stylesheet" href="http://www.cl.cam.ac.uk/style/ie6.css" type="text/css" media="screen" /><script type="text/javascript" src="http://www.cam.ac.uk/global/js/minmax.js"></script><![endif]--><!--[if IE 7]><link rel="stylesheet" href="http://www.cl.cam.ac.uk/style/ie7.css" type="text/css" media="screen" /><![endif]--><style>    a.icon-github {
	background: url(../github.png) no-repeat 0 0;
	padding: 0 0 2px 2em;
    }
    a.icon-cloud {
	background: url(../cloud.png) no-repeat 0 0;
        background-size: 17px;
	padding: 0 0 2px 2em;
    }
    a.icon-bullhorn {
	background: url(../bullhorn.png) no-repeat 0 0;
        background-size: 17px;
	padding: 0 0 2px 2em;
    }
    a.icon-wrench {
	background: url(../wrench.png) no-repeat 0 0;
        background-size: 17px;
	padding: 0 0 2px 2em;
    }
    </style><link href="t2.html" rel="Next" /><link href="index.html" rel="Up" /></head>
<body class="two-col dept">
<div id="skip"> <a accesskey="2" href="#skip-content">Skip to content</a>&#160;|&#160;<a accesskey="0" href="http://www.cam.ac.uk/site/accesskeys.html">Access key help</a> </div><div id="header">  <div id="branding"><a accesskey="1" href="http://www.cam.ac.uk/"><img alt="University of Cambridge" class="ucam" src="http://www.cl.cam.ac.uk/images/identifier.gif" /></a>
  </div>

    <div id="site-search">
    <form action="http://www.google.co.uk/search" method="get">      <fieldset>      <label for="search-term">Search</label>
      <input accesskey="4" id="search-term" name="q" type="text" value="" />      <input alt="Search" id="search-button" src="http://www.cl.cam.ac.uk/images/button-search.gif" title="Search" type="image" value="Search" />
      

      <input name="domains" type="hidden" value="cam.ac.uk;www.cl.cam.ac.uk" /><input name="sitesearch" type="hidden" value="www.cl.cam.ac.uk" /></fieldset>
    </form>

  <ul><li class="last"><a href="http://www.cl.cam.ac.uk/search/">Advanced search</a></li><li><a href="http://www.cl.cam.ac.uk/az/">A&#8211;Z</a></li><li><a href="http://www.cl.cam.ac.uk/contact/">Contact us</a></li></ul>
  </div>
</div>

<div id="dept-title"><h1><a href="../index.html">Computer Laboratory</a></h1>
</div>

<div id="container"> <a id="skip-content" name="skip-content"></a>
<ul id="nav-breadcrumb"><li class="first"><a href="http://www.cam.ac.uk/">University of Cambridge</a></li><li><a href="http://www.cl.cam.ac.uk/">Computer Laboratory</a></li><li><a href="../index.html">OCaml Labs</a></li><li><a href="index.html">Projects</a></li><li><a href="compiler.html">The OCaml Compiler</a></li></ul><ul id="nav-primary"><li><div><a href="../index.html">OCaml Labs</a></div></li><li><div><a href="../news/index.html">News</a></div></li><li><div><a href="../blogs/index.html">Blogs</a></div></li><li class="active"><div><a href="index.html">Projects</a></div></li><li><div><a href="../papers/index.html">Papers</a></div></li><li><div><a href="../pkg/index.html">Software</a></div></li><li><div><a href="../people/index.html">People</a></div></li><li><div><a href="../collaboration.html">Collaboration</a></div></li><li><div><a href="../contact.html">Contact Us</a></div></li></ul><div id="content"><div id="sub-brand"><p class="section">OCaml Labs</p></div><div id="content-primary">    <div class="ucampas-toc right"><table><tbody><tr><td><p>Contents</p><ul><li><a href="#compiler">The OCaml Compiler</a><ul><li><a href="#Team">Team</a></li><li><a href="#Tasks">Tasks</a><ul><li><a href="#Open types">Open types</a></li><li><a href="#Record disambiguation">Record disambiguation</a></li><li><a href="#Syntax extensions">Syntax extensions</a></li><li><a href="#Namespaces plan">Namespaces plan</a></li><li><a href="#Multicore">Multicore</a></li><li><a href="#Compile-time meta programming">Compile-time meta programming</a></li><li><a href="#Emission of DWARF debugging information">Emission of DWARF debugging information</a></li><li><a href="#OCaml Java 2.0 preview">OCaml Java 2.0 preview</a></li></ul></li></ul></li></ul></td></tr></tbody></table></div>
    
    
            <style type="text/css">            table { 
            table-layout: fixed;
            border-spacing: 0px 2px;
            }
            .blank { background-color: #fefefe; }
            .planning { background-color: #bbccee; }
            .doing { background-color: #eeeebb; }
            .complete { background-color: #bbddbb; }
            img.mugshot { float:left; padding-right: 5px; }
            tr.dates {
            font-size: 0.75em;
            background-color: #dfdfdf;
            color: #111111;
            }
            </style>
          
    <h1 id="compiler">The OCaml Compiler</h1>
    <div class="width:75%"><p><a href="http://ocaml.org"><img class="left" src="../images/ocaml-grey.png" width="70px" /></a>We are working on maintaining and extending the core OCaml compiler toolchain
and runtime. This consists of a variety of day-to-day tasks such as submitting
bug fixes, and also longer-term improvements to the type system and runtime
libraries (see below).</p>
<p>We are actively engaging with the wider OCaml community to ensure that any 
improvements and modifications we propose are thoroughly discussed, 
well-formulated and maintainable.</p>
</div>
    <h2 id="Team">Team</h2>
    <p><a href="../people/avsm.html"><img class="inline" height="50px" src="../mugshots/avsm.jpg" style="" /></a><a href="../people/lpw25.html"><img class="inline" height="50px" src="../mugshots/lpw25.jpg" style="" /></a><a href="../people/shinwell.html"><img class="inline" height="50px" src="../mugshots/unknown.jpg" style="" /></a><a href="../people/stedolan.html"><img class="inline" height="50px" src="../mugshots/unknown.jpg" style="" /></a><a href="../people/xclerc.html"><img class="inline" height="50px" src="../mugshots/xavierclerc.jpg" style="" /></a><a href="../people/yallop.html"><img class="inline" height="50px" src="../mugshots/yallop.jpeg" style="" /></a></p>
    <h2 id="Tasks">Tasks</h2>
    <table class="projects" width="95%">    <tbody><tr class="dates"><td>Sep '12</td><td>Oct '12</td><td>Nov '12</td><td>Dec '12</td><td>Jan '13</td><td>Feb '13</td><td>Mar '13</td><td>Apr '13</td><td>May '13</td><td>Jun '13</td><td>Jul '13</td><td>Aug '13</td><td>Sep '13</td><td>Oct '13</td><td>Nov '13</td><td>Dec '13</td><td>Jan '14</td><td>Feb '14</td><td>Mar '14</td><td>Apr '14</td><td>&#8734;</td></tr>
     <tr> <td class="blank" colspan="2"></td> <td class="complete" colspan="3">               <a href="http://lpw25.net"><img alt="Leo White" class="mugshot" height="30px" src="../mugshots/lpw25.jpg" /></a>
               <a href="#Open types">Open types</a><br />             </td> <td class="blank" colspan="15"></td> <td></td> </tr>  <tr> <td class="blank" colspan="1"></td> <td class="complete" colspan="3">               <a href="http://lpw25.net"><img alt="Leo White" class="mugshot" height="30px" src="../mugshots/lpw25.jpg" /></a>
               <a href="#Record disambiguation">Record disambiguation</a><br />             </td> <td class="blank" colspan="16"></td> <td></td> </tr>  <tr> <td class="blank" colspan="4"></td> <td class="complete" colspan="6">               <a href="http://lpw25.net"><img alt="Leo White" class="mugshot" height="30px" src="../mugshots/lpw25.jpg" /></a>
               <a href="#Syntax extensions">Syntax extensions</a><br />             </td> <td class="blank" colspan="10"></td> <td></td> </tr>  <tr> <td class="blank" colspan="6"></td> <td class="complete" colspan="2">               <a href="http://lpw25.net"><img alt="Leo White" class="mugshot" height="30px" src="../mugshots/lpw25.jpg" /></a>
               <a href="#Namespaces plan">Namespaces plan</a><br />             </td> <td class="blank" colspan="12"></td> <td></td> </tr>  <tr> <td class="blank" colspan="7"></td> <td class="planning" colspan="13">               <img alt="Stephen Dolan" class="mugshot" height="30px" src="../mugshots/unknown.jpg" />               <a href="#Multicore">Multicore</a><br />             </td>  <td class="planning"><i>plan?</i></td> </tr>  <tr> <td class="blank" colspan="8"></td> <td class="planning" colspan="12">               <img alt="Jeremy Yallop" class="mugshot" height="30px" src="../mugshots/yallop.jpeg" />               <a href="#Compile-time meta programming">Compile-time meta programming</a><br />             </td>  <td class="planning"><i>plan?</i></td> </tr>  <tr> <td class="blank" colspan="5"></td> <td class="doing" colspan="12">               <a href="http://www.three-tuns.net/mark"><img alt="Mark Shinwell" class="mugshot" height="30px" src="../mugshots/unknown.jpg" /></a>
               <a href="#Emission of DWARF debugging information">Emission of DWARF debugging information</a><br />             </td> <td class="blank" colspan="3"></td> <td></td> </tr>  <tr> <td class="blank" colspan="8"></td> <td class="complete" colspan="4">               <a href="http://www.x9c.fr"><img alt="Xavier Clerc" class="mugshot" height="30px" src="../mugshots/xavierclerc.jpg" /></a>
               <a href="#OCaml Java 2.0 preview">OCaml Java 2.0 preview</a><br />             </td> <td class="blank" colspan="8"></td> <td></td> </tr> 
    <tr><td colspan="21">&#160;</td></tr>
    </tbody></table>
  
    
         <div style="width:75%">         <h3 id="Open types" style="border-bottom: thin solid #999999;">Open types</h3>
         <p><a href="../people/lpw25.html"><img class="inline" height="40px" src="../mugshots/lpw25.jpg" style="float:left; padding-right: 30px" /></a>  <span class="complete">Complete</span> by <a href="../people/lpw25.html">Leo White</a> (Oct 2012 - Jan 2013) <br /><a class="icon-github" href="https://github.com/lpw25/ocaml-open">Github</a> &#160; <a class="icon-cloud" href="http://sites.google.com/site/ocamlopen/">Website</a> &#160; </p>
         <p>Add open extensible types to OCaml. One open type already exists
within OCaml: the exn type used for exceptions. This project extends
this mechanism to allow the programmer to create their own open types.
This has previously been proposed for functional languages a number of
times, for instance as part of a solution to the expression problem
(Loh et al. <a href="http://people.cs.uu.nl/andres/OpenDatatypes.pdf">"Open Data Types and Open Functions"</a>).
Unlike "exn", these extensible types can have type parameters, allowing
for extensible GADTs.</p>
<p>For example:</p>
<pre class="ocaml"><code class="ocaml">type foo = ..

type foo += A

type foo += B of int

let is_a x =
  match x with
    A -&gt; true
  | _ -&gt; false</code></pre>

         <br /></div>
      
         <div style="width:75%">         <h3 id="Record disambiguation" style="border-bottom: thin solid #999999;">Record disambiguation</h3>
         <p><a href="../people/lpw25.html"><img class="inline" height="40px" src="../mugshots/lpw25.jpg" style="float:left; padding-right: 30px" /></a>  <span class="complete">Complete</span> by <a href="../people/lpw25.html">Leo White</a> (Sep 2012 - Dec 2012) <br /><a class="icon-cloud" href="http://caml.inria.fr/mantis/view.php?id=5759">Mantis</a> &#160; <a href="http://caml.inria.fr/mantis/view.php?id=5584">Bug report</a> &#160; </p>
         <p>Type-based record disambiguation: <a href="http://www.lpw25.net">Leo</a> helped with the
record-disambiguation branch of OCaml by Jacques Garrigue. This branch uses
type-information to disambiguate between record labels and variant constructors
with the same names. For discussions of the semantics of this feature see
<a href="http://gallium.inria.fr/~scherer/gagallium/resolving-field-names/">Gabriel</a>'s
or
<a href="http://www.lexifi.com/blog/type-based-selection-label-and-constructors">Alain</a>'s
blog posts. Leo rewrote the record-disambiguation branch to use an alternative
semantics and improved the error messages. The branch has since been <a href="https://github.com/ocaml/ocaml/commit/c8273a179cb0bc835924eeca522922a1769d9d54">merged
into OCaml
trunk</a></p>

         <br /></div>
      
         <div style="width:75%">         <h3 id="Syntax extensions" style="border-bottom: thin solid #999999;">Syntax extensions</h3>
         <p><a href="../people/lpw25.html"><img class="inline" height="40px" src="../mugshots/lpw25.jpg" style="float:left; padding-right: 30px" /></a>  <span class="complete">Complete</span> by <a href="../people/lpw25.html">Leo White</a> (Dec 2012 - Jun 2013) <br /><a class="icon-cloud" href="http://lists.ocaml.org/listinfo/wg-camlp4">Working group</a> &#160; <a class="icon-cloud" href="http://www.lpw25.net/2013/01/23/camlp4-alternative-part-1.html">Blog</a> &#160; </p>
         <p>Since its creation camlp4 has proven to be a very useful tool. People
have used it to experiment with new features for OCaml and to provide
interesting meta-programming facilities. However, there is general
agreement that camlp4 is too powerful and complex for the applications
that it is most commonly used for, and there is a growing movement to
provide a simpler alternative.</p>
<p>A working group was formed (wg-camlp4@lists.ocaml.org) regarding the
future of syntax extensions in OCaml. The aim of the working group is
to formulate a solid transition plan to create a 'basic OCaml
ecosystem' that does not require camlp4. Alain Frisch's introductory
email has more detail and can be
<a href="http://lists.ocaml.org/pipermail/wg-camlp4/2013-January/000000.html">found in the archive</a>.</p>

         <br /></div>
      
         <div style="width:75%">         <h3 id="Namespaces plan" style="border-bottom: thin solid #999999;">Namespaces plan</h3>
         <p><a href="../people/lpw25.html"><img class="inline" height="40px" src="../mugshots/lpw25.jpg" style="float:left; padding-right: 30px" /></a>  <span class="complete">Complete</span> by <a href="../people/lpw25.html">Leo White</a> (Feb 2013 - Apr 2013) <br /><a class="icon-cloud" href="http://www.lpw25.net/2013/03/10/ocaml-namespaces.html">Blog</a> &#160; <a class="icon-cloud" href="http://lists.ocaml.org/pipermail/platform/2013-February/000050.html">Epic Mail Thread</a> &#160; </p>
         <p>Namespaces provide a means for grouping the components of a library
together.</p>
<p>Up to now this has been achieved using the OCaml module system. Since
the components of an OCaml library are modules, a module can be created that
contains all the components of the library as sub-modules. However, there are
some critical problems with creating a single module containing the whole
library:</p>
<ul><li><p>The module is a single unit that has to be linked or not as a whole. This
 means that any program using part of the library must include the entire
 library.</p>
</li><li><p>The module is a choke-point in the dependency graph. If a file depends
 on one thing in the library then it needs to be recompiled if anything
 in the library changes.</p>
</li><li><p>Opening a very large module is slow and can seriously affect build
 performance.</p>
</li></ul>

<p>These problems are caused by the runtime semantics of modules. Namespaces have
no runtime sematics and could provide a solution to these problems.</p>

         <br /></div>
      
         <div style="width:75%">         <h3 id="Multicore" style="border-bottom: thin solid #999999;">Multicore</h3>
         <p><a href="../people/stedolan.html"><img class="inline" height="40px" src="../mugshots/unknown.jpg" style="float:left; padding-right: 30px" /></a>  <span class="planning">Planning</span> by <a href="../people/stedolan.html">Stephen Dolan</a> (Mar 2013 -) <br /><a class="icon-github" href="https://github.com/stedolan/ocaml">Github</a> &#160; </p>
         <p>Building an efficient multi-core garbage collector remains a
challenging research issue. We will begin by investigating techniques
that do not involve fine-grained locking, as this has been shown to be
error-prone, difficult to maintain, and impacts sequential
performance. Instead, we prefer to isolate threads to individual
cores, with region-based heaps that can be garbage collected
separately. This technique has been successfully demonstrated in
MultiMLton, system and runtime, and we will implement it in OCaml and
its large body of third-party code.</p>

         <br /></div>
      
         <div style="width:75%">         <h3 id="Compile-time meta programming" style="border-bottom: thin solid #999999;">Compile-time meta programming</h3>
         <p><a href="../people/yallop.html"><img class="inline" height="40px" src="../mugshots/yallop.jpeg" style="float:left; padding-right: 30px" /></a>  <span class="planning">Planning</span> by <a href="../people/yallop.html">Jeremy Yallop</a> (Apr 2013 -) <br /></p>
         <p>There are currently two ways of generating OCaml code from within
OCaml programs: camlp4 (and its successor, ppx), which produces
untyped syntax, and MetaOCaml, which produces typed code.</p>
<p>Our research into static metaprogramming aims to combine the
advantages of the two approaches.  The resulting system will allow
users to write code generators that enjoy the guarantees provided by
MetaOCaml, but that run entirely during compilation, like camlp4
extensions.  Typeful generation of code based on statically-available
information has applications in a number of areas, including
deriving-style generic programming extensions, HTML templates, foreign
function interface generation and embedded DSLs.</p>

         <br /></div>
      
         <div style="width:75%">         <h3 id="Emission of DWARF debugging information" style="border-bottom: thin solid #999999;">Emission of DWARF debugging information</h3>
         <p><a href="../people/shinwell.html"><img class="inline" height="40px" src="../mugshots/unknown.jpg" style="float:left; padding-right: 30px" /></a>  <span class="doing">In Progress</span> by <a href="../people/shinwell.html">Mark Shinwell</a> (Jan 2013 - Jan 2014) <br /><a class="icon-github" href="https://github.com/mshinwell/ocaml">4.00.1-allocation-profiling</a> &#160; </p>
         <p>Debuggers such as the GNU debugger <a href="http://www.gnu.org/software/gdb/">gdb</a> are
valuable tools when tracking down problems in low-level or parallel
applications.  The programmer experience when using such a debugger to examine
natively-compiled OCaml programs currently lacks lustre.  Recent versions of
the compiler can emit a limited amount of debugging information which enables
the recovery of correct stack traces in the debugger.  However names of
functions still appear in mangled form, it is not possible to reference local
variables by name, and traversal of OCaml values is troublesome.  This is
unfortunately by no means an exhaustive list of deficiencies.</p>
<p>This project aims to equip the native-code OCaml compiler and the GNU debugger
with the necessary infrastructure to improve debugging of OCaml programs.  The
compiler will be enhanced to emit the standard DWARF debugging information
format in order to describe the naming and placement of data together with
relevant type information.  At the same time the debugger will gain
functionality to understand the OCaml-specific parts of this information
including the ability to demangle OCaml names.  It is planned to implement much
of the DWARF output stage in the compiler and the debugger-side support in
libraries such that they might be re-used in other projects.</p>
<p>It is hoped that, as support for native-code debugging of OCaml programs in the
traditional manner evolves, it will become more easily possible to build more
advanced debugging tools.  These might exploit the scripting capabilities of
gdb, for example, and target environments such as large-scale concurrent
systems.</p>
<p>This work is ongoing in the <a href="https://github.com/ocaml/ocaml/tree/dwarf">dwarf</a>
branch of the OCaml repository.</p>

         <br /></div>
      
         <div style="width:75%">         <h3 id="OCaml Java 2.0 preview" style="border-bottom: thin solid #999999;">OCaml Java 2.0 preview</h3>
         <p><a href="../people/xclerc.html"><img class="inline" height="40px" src="../mugshots/xavierclerc.jpg" style="float:left; padding-right: 30px" /></a>  <span class="complete">Complete</span> by <a href="../people/xclerc.html">Xavier Clerc</a> (Apr 2013 - Aug 2013) <br /><a class="icon-cloud" href="http://ocamljava.x9c.fr/preview/">Homepage</a> &#160; </p>
         <p>OCaml Java is a compiler from OCaml source code to Java bytecode, that can run
on any modern Java runtime. This is an interesting way to explore the multicore
runtime performance of OCaml with a highly concurrent collector, as is present
in the latest JVMs.</p>
<p>The goal of this work is to stabilise and release the <a href="http://ocamljava.x9c.fr/preview/">preview of 2.0</a>,
which greatly improves CPU utilisation and memory footprint.</p>

         <br /></div>
      
  </div></div>

<ul id="site-info"><li class="copy">&#169; 2012-2013 Anil Madhavapeddy<br />Information provided by <a href="mailto:avsm2@cl.cam.ac.uk">Anil Madhavapeddy</a></li></ul>
</div>
</body></html>